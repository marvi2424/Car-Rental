{% extends "layout.html" %}

{% block title %}
Book
{% endblock %}

{% block main %}

{% for c in car %}

<div class="card mb-3" style="margin-left:5%;margin-right:5%">
  <div class="row g-0">
    <div class="col-md-4">
      <img src="{{ c.main_photo_ref }}" class="img-fluid rounded-start" alt="Car Photo">
      <hr class="invisiblehr">
      {% for c_photo in c_photos %}
      <img src="{{ c_photo.photo_ref }}" class="img-fluid rounded-start" alt="Car Photo">
      <hr class="invisiblehr">
      {% endfor %}

    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h3 class="text-center"> {{ c.car_name }}</h3>
        <ul class="list-unstyled row">
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 24 24" width="1.5em" height="1.5em">
              <path
                d="M16.5 6a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0zM18 6A6 6 0 1 0 6 6a6 6 0 0 0 12 0zM3 23.25a9 9 0 1 1 18 0 .75.75 0 0 0 1.5 0c0-5.799-4.701-10.5-10.5-10.5S1.5 17.451 1.5 23.25a.75.75 0 0 0 1.5 0z">
              </path>
            </svg>
            <p>{{ c.seats }}</p>
          </li>
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 24 24" width="1.5em" height="1.5em">
              <path
                d="M19.25 14.25v-4.5l-1.374.416 3 4.5c.412.617 1.374.326 1.374-.416v-4.5a.75.75 0 0 0-1.5 0v4.5l1.374-.416-3-4.5c-.412-.617-1.374-.326-1.374.416v4.5a.75.75 0 0 0 1.5 0zm3 6a3.75 3.75 0 0 0-3.75-3.75.75.75 0 0 0-.75.75v6c0 .414.336.75.75.75a3.75 3.75 0 0 0 3.75-3.75zm-1.5 0a2.25 2.25 0 0 1-2.25 2.25l.75.75v-6l-.75.75a2.25 2.25 0 0 1 2.25 2.25zM18.5 4.5H20A2.25 2.25 0 0 0 20 0h-1.5a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6l-.75.75H20A.75.75 0 0 1 20 3h-1.5a.75.75 0 0 0 0 1.5zM4.25 6.75v4.5A2.25 2.25 0 0 0 6.5 13.5H8a.75.75 0 0 1 .75.75v4.5A2.25 2.25 0 0 0 11 21h3a.75.75 0 0 0 0-1.5h-3a.75.75 0 0 1-.75-.75v-4.5A2.25 2.25 0 0 0 8 12H6.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-1.5 0zm3-3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm1.5 0a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0z">
              </path>
            </svg>
            <p>{{ c.transmission }}</p>
          </li>
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 512 512" width="1.5em" height="1.5em">
              <path
                d="M32 64C32 28.65 60.65 0 96 0H256C291.3 0 320 28.65 320 64V256H328C376.6 256 416 295.4 416 344V376C416 389.3 426.7 400 440 400C453.3 400 464 389.3 464 376V221.1C436.4 214.9 416 189.8 416 160V96L384 64C375.2 55.16 375.2 40.84 384 32C392.8 23.16 407.2 23.16 416 32L493.3 109.3C505.3 121.3 512 137.5 512 154.5V376C512 415.8 479.8 448 440 448C400.2 448 368 415.8 368 376V344C368 321.9 350.1 303.1 328 303.1H320V448C337.7 448 352 462.3 352 480C352 497.7 337.7 512 320 512H32C14.33 512 0 497.7 0 480C0 462.3 14.33 448 32 448V64zM96 176C96 184.8 103.2 192 112 192H240C248.8 192 256 184.8 256 176V80C256 71.16 248.8 64 240 64H112C103.2 64 96 71.16 96 80V176z">
              </path>
            </svg>
            <p>{{ c.fuel_type }}</p>
          </li>
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 256 256" width="1.7em" height="1.7em">
              <path
                d="M241,69.7,221.7,50.3a8.1,8.1,0,0,0-11.4,11.4L229.7,81a7.9,7.9,0,0,1,2.3,5.6V168a8,8,0,0,1-16,0V128a24.1,24.1,0,0,0-24-24H176V56a24.1,24.1,0,0,0-24-24H72A24.1,24.1,0,0,0,48,56V208H32a8,8,0,0,0,0,16H192a8,8,0,0,0,0-16H176V120h16a8,8,0,0,1,8,8v40a24,24,0,0,0,48,0V86.6A23.8,23.8,0,0,0,241,69.7ZM144,120H80a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Z">
              </path>
            </svg>
            <p>Fuel Capacity: {{ c.fuel_capacity }}</p>
          </li>
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 512 512" width="1.7em" height="1.7em">
              <path d="M416,320s-64,48-64,99.84c0,33.28,28.67,60.16,64,60.16s64-27,64-60.16C480,368,416,320,416,320Z" />
              <path d="M144,32,68,108l70,70L32,280,208,464,360.8,315.7,416,304Zm24,116-39.6-41,15.88-15.89L184,132Z">
              </path>
            </svg>
            <p>{{c.color}}</p>
          </li>
          <li class="list-item col-4 border-top py-2">
            <svg viewBox="0 0 24 24" width="2em" height="2em">
              <path
                d="M7.76,16.24C6.67,15.16,6,13.66,6,12s0.67-3.16,1.76-4.24l1.42,1.42C8.45,9.9,8,10.9,8,12c0,1.1,0.45,2.1,1.17,2.83 L7.76,16.24z M16.24,16.24C17.33,15.16,18,13.66,18,12s-0.67-3.16-1.76-4.24l-1.42,1.42C15.55,9.9,16,10.9,16,12 c0,1.1-0.45,2.1-1.17,2.83L16.24,16.24z M12,10c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,10,12,10z M20,12 c0,2.21-0.9,4.21-2.35,5.65l1.42,1.42C20.88,17.26,22,14.76,22,12s-1.12-5.26-2.93-7.07l-1.42,1.42C19.1,7.79,20,9.79,20,12z M6.35,6.35L4.93,4.93C3.12,6.74,2,9.24,2,12s1.12,5.26,2.93,7.07l1.42-1.42C4.9,16.21,4,14.21,4,12S4.9,7.79,6.35,6.35z">
              </path>
            </svg>
            <p>Parking sensor: {{ c.parking_sensor }}</p>
          </li>
        </ul>

        <p class="card-text"></p>
        <p class="card-text"><small class="text-muted"></small></p>
        <h5 class="mb-4 text-center">Price per day: {{ c.day_price | euro }}</h5>

        {% if len(bookings) != 0 %}
        <p class="text-center text-danger text-lg">NOT AVAILABLE DURING: </p>
        {% endif %}

        {% for book in bookings %}

        <p class="text-center text-md"> {{ book.pickupdate | date }} - {{ book.returndate | date}} </p>

        {% endfor %}


        {% endfor %}



        <div class="container">
          <main>
            <div class="py-5 text-center">
            </div>

            <div class="col-md-7 col-lg-8" style="margin-left:10%;margin-right:10%;">
              <h4 class="mb-3 text-center">Reserve now</h4>


              <form class="needs-validation" novalidate action="/create-checkout-session" method="POST">
                <div class="row g-3">
                  <div class="col-12">
                    <label for="fullName" class="form-label">Full name*</label>
                    <input type="text" class="form-control" id="fullName" name="fullName"
                      placeholder="Enter your full name" value="" autocomplete="off" required>
                    <div class="invalid-feedback">
                      Valid full name is required.
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="pickupdate" class="form-label">Pick up Date*</label>
                    <input type="date" class="form-control" id="pickupdate" name="pickupdate" min="{{min_date_p}}"
                      max="{{max_date_p}}" required>

                    <div class="invalid-feedback">
                      Please enter valid date
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="pickuphour" class="form-label">Pick up Hour*</label>
                    <select class="form-select" id="pickuphour" name="pickuphour">
                      {% for i in range(6,24) %}

                      {% if i < 10 %} <option value="{{ i }}">0{{ i }}:00</option>
                        {% else %}
                        <option value="{{ i }}">{{ i }}:00</option>
                        {% endif %}

                        {% endfor %}

                    </select>
                    <div class="invalid-feedback">
                      Please enter valid hour
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="returndate" class="form-label">Return date* </label>
                    <input type="date" class="form-control" id="returndate" name="returndate" min="{{ min_date_r}}"
                      max="{{ max_date_r}}" required>
                    <div class="invalid-feedback">
                      Please enter valid date
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="releasehour" class="form-label">Return Hour*</label>
                    <select class="form-select" id="releasehour" name="releasehour">
                      {% for i in range(6,24) %}

                      {% if i < 10 %} <option value="{{ i }}">0{{ i }}:00</option>
                        {% else %}
                        <option value="{{ i }}">{{ i }}:00</option>
                        {% endif %}

                        {% endfor %}

                    </select>
                    <div class="invalid-feedback">
                      Please enter valid hour
                    </div>
                  </div>
                  <h4 class="text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                      class="bi bi-geo-alt" viewBox="0 0 16 16">
                      <path
                        d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z" />
                      <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                    </svg>
                    Tirana
                  </h4>

                  <hr class="my-4">

                  <button class="w-100 btn btn-primary btn-lg" type="submit" id="checkout">Continue checkout </button>

              </form>


            </div>
        </div>
        </main>

      </div>
    </div>
  </div>
</div>


<script src="/static/form-validation.js"></script>
</body>

{% endblock %}